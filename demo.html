{% load static %}


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BOXD Demo - Simplifying Municipal Regulations</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=League+Spartan:wght@400;700&display=swap" rel="stylesheet">
    <link rel="icon" href="img/boxd.ico" type="image/x-icon">
    <style>
        :root {
            --primary-color: #ff3d35;
            --secondary-color: #ff8a4b;
            --text-color: #FFFFFF;
            --light-text-color: #AAAAAA;
            --highlight-color: #FF5733;
        }
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            background-image: url('img/Dark\ Gradient\ 12.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            color: var(--text-color);
            min-height: 100vh;
        }
        .container {
            position: relative;
            z-index: 1;
            padding-top: 60px; /* Match the header height */
            width: 100%;
            max-width: none;
            margin: 0;
            padding: 2rem;
            box-sizing: border-box;
            background-color: rgba(0, 0, 0, 0.5);
            min-height: 100vh; /* Add this line */
        }
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px; /* Adjust as needed */
            z-index: 1000;
            transition: background-color 0.3s ease; /* Add smooth transition */
        }
        .header-scrolled {
            background-color: rgba(0, 0, 0, 0.5); /* Background color when scrolled */
        }
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem; /* Remove vertical padding */
            width: 100%;
            box-sizing: border-box;
            height: 100%;
            background-color: transparent;
        }
        .logo {
            font-weight: bold;
            font-size: 3.5rem;
            color: var(--primary-color);
        }
        .demo-container {
            text-align: center;
            margin-top: 10rem; /* Changed from 4rem to 0 */
            width: 100%; /* Ensure the container takes full width */
        }
        .demo-container h1 {
            margin-top: 23px; /* Add this to remove any top margin from the h1 */
            padding-top: 1rem; /* Add a small padding to give some breathing room */
            font-size: 4rem;
            margin-bottom: 2rem;
        }
        .video-container {
            position: relative;
            
            padding-bottom: 37%; /* Adjusted for a shorter height */
            height: 0;
            overflow: hidden;
            max-width: 65%; /* Reduced from 73% to 60% */
            margin: 0 auto;
        }
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 20px;
        }
        .video-container video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 20px;
        }
        .waitlist-form {
            margin-top: 4rem;
            text-align: center;
        }
        .waitlist-form h2 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
        }
        .cta-form {
            display: flex;
            flex-direction: column;
            max-width: 600px;
            margin: 0 auto;
            gap: 1rem;
        }
        .cta-form input {
            padding: 1.5rem 2rem;
            border: none;
            background-color: rgba(255, 255, 255, 0.2);
            color: var(--text-color);
            font-size: 1.2rem;
            border-radius: 40px;
        }
        .cta-button {
            background: linear-gradient(155deg, var(--secondary-color), var(--primary-color));
            color: white;
            padding: 1.5rem 3rem;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: 600;
            border-radius: 40px;
            transition: transform 0.3s ease;
        }
        .cta-button:hover {
            transform: scale(1.05);
        }
        .highlight-gradient {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 700;
            display: inline-block;
        }
        .nav-links {
            display: flex;
            gap: 2rem;
            position: absolute; /* Add this */
            left: 50%; /* Add this */
            transform: translateX(-50%); /* Add this */
        }
        .nav-links a {
            color: var(--light-text-color);
            text-decoration: none;
            font-size: 1.5rem; /* Increased font size */
            transition: color 0.3s ease;
        }
        .nav-links a:hover {
            color: var(--primary-color);
        }
        .join-button {
            background: transparent;
            border: 3px solid var(--primary-color);
            color: var(--primary-color);
            padding: 1rem 2rem;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.3rem;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-left: auto;
            text-decoration: none; /* Add this line to remove underline from the link */
        }
        .join-button:hover {
            background-color: var(--primary-color);
            color: white;
            transform: scale(1.05);
        }

        /* Desktop styles */
        @media (min-width: 769px) {
            .join-button {
                margin-top: 30px; /* Add top margin for desktop view */
                margin-right: 10px; /* Add right margin for desktop view */
            }

     
        }

        /* Responsive styles */
        @media (max-width: 768px) {
            .header-content {
                padding: 1rem;
            }

            .logo {
                font-size: 2.5rem;
            }

            .nav-links {
                display: none;
                position: fixed;
                top: 80px; /* Adjust this value to match your header height */
                left: 50%;
                transform: translateX(-50%);
                background-color: rgba(0, 0, 0, 0.95); /* Almost opaque black background */
                padding: 10px 20px;
                border-radius: 8px;
                text-align: center;
                z-index: 2000; /* Ensure it's above other content */
                width: auto;
                white-space: nowrap;
            }

            .nav-links.active {
                display: block;
            }

            .nav-links a {
                display: block;
                margin: 10px 0;
                font-size: 1.2rem;
                color: var(--text-color);
                text-decoration: none;
            }

            .header {
                z-index: 2001;
            }

            .join-button {
                display: none; /* Hide the Join button on mobile */
            }

            .demo-container h1 {
                font-size: 2.5rem;
            }

            .video-container {
                padding-bottom: 56.25%; /* 16:9 aspect ratio */
                max-width: 100%;
            }

            .waitlist-form h2 {
                font-size: 2rem;
            }

            .cta-form {
                padding: 0 1rem;
            }

            .cta-form input,
            .cta-button {
                font-size: 1rem;
                padding: 1rem 1.5rem;
            }

            .hamburger {
                margin-left: auto; /* Push hamburger to the right */
                margin-right: 15px; /* Add some right margin */
            }
        }

        /* Remove hamburger menu styles */
        .hamburger {
            display: none;
        }

        /* Adjust the mobile styles */
        @media (max-width: 768px) {
            .nav-links {
                display: none; /* Hide the original nav links on mobile */
            }

            .mobile-home-link {
                display: block;
                color: var(--primary-color);
                text-decoration: none;
                font-size: 1.2rem;
                font-weight: 600;
            }

            .join-button {
                display: none; /* Hide the Join button on mobile */
            }
        }

        .mobile-home-link {
            display: none; /* Hide by default */
        }

        /* Desktop styles */
        @media (min-width: 769px) {
            .mobile-home-link {
                display: none !important; /* Ensure it's hidden on desktop */
            }
        }

        /* Mobile styles */
        @media (max-width: 768px) {
            .nav-links {
                display: none; /* Hide the original nav links on mobile */
            }

            .mobile-home-link {
                display: block; /* Show only on mobile */
                color: var(--primary-color);
                text-decoration: none;
                font-size: 1.2rem;
                font-weight: 600;
            }

            .join-button {
                display: none; /* Hide the Join button on mobile */
            }
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: transparent; /* Removed background */
        }

        .modal-content {
            background-color: transparent;
            margin: 6% auto;
            padding: 0; /* Removed padding */
            width: 80%;
            max-width: 600px;
            position: relative; /* Add this line */
        }

        .close {
            color: #fff;
            font-size: 28px;
            font-weight: bold;
            position: absolute;
            left: 10px; /* Position on the left */
            top: 10px; /* Move down slightly */
            z-index: 10001;
            cursor: pointer;
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            line-height: 1;
            border: 2px solid #fff;
        }

        .close:hover,
        .close:focus {
            color: #ddd;
            text-decoration: none;
        }

        /* Ensure the close button is visible on mobile */
        @media (max-width: 768px) {
            .close {
                top: 15px; /* Slightly lower on mobile for better visibility */
                left: 15px; /* Slightly more inward on mobile */
            }
        }

        /* ... other existing styles ... */

        #calendly-embed {
            border-radius: 10px;
            overflow: hidden;
        }

        /* Add this media query at the end of your styles */
        @media (max-width: 768px) {
            body {
                padding-top: 60px; /* Adjust if your mobile header height is different */
            }
            .container {
                min-height: calc(100vh - 60px); /* Adjust to match the mobile header height */
            }
        }

        /* Mobile styles */
        @media (max-width: 768px) {
            .header {
                background-color: rgba(0, 0, 0, 0.5); /* Always have background on mobile */
            }
        }

        /* Desktop styles */
        @media (min-width: 769px) {
            .header {
                background-color: transparent; /* Start with transparent background on desktop */
            }
        }

        /* Existing styles... */

        #calendlyModal {
            display: none;
            position: fixed;
            z-index: 1000; /* Ensure it's above most content but below the header */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }

        .modal-content {
            background-color: transparent;
            margin: 120px auto 0; /* Increased top margin to push it lower */
            padding: 0;
            width: 80%;
            max-width: 600px;
            position: relative;
        }

        /* Adjust for mobile */
        @media (max-width: 768px) {
            .modal-content {
                width: 100%;
                margin-top: 100px; /* Increased for mobile as well */
            }

            #calendly-embed {
                height: calc(100vh - 100px); /* Adjusted to account for increased top margin */
            }
        }

        /* Ensure the close button is visible */
        .close {
            color: #fff;
            font-size: 28px;
            font-weight: bold;
            position: absolute;
            right: -15px;
            top: 12px;
            z-index: 10001; /* Highest z-index to be on top of modal content */
            cursor: pointer;
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            line-height: 1;
            border: 2px solid #fff;
        }

        /* ... other existing styles ... */
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <div class="logo">BOXD.</div>
               
                <a href="/" class="join-button" id="joinButton">Home</a>
                <a href="/" class="mobile-home-link">Home</a>
            </div>
        </header>
        
        <section class="demo-container">
            
            <div class="video-container">
                <video id="demoVideo" autoplay controls>
                    <source src="img/BOXD Marketing.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </section>

        <section class="waitlist-form">
            <h2>Ready to see <span class="highlight-gradient">BOXD</span> in action?</h2>
            <button id="openModal" class="cta-button">Schedule a Demo</button>
        </section>

        <div id="demoModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <div id="calendly-embed" style="min-width:320px;height:630px;"></div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            const video = document.getElementById('demoVideo');
            const openModalBtn = document.getElementById('openModal');
            const modal = document.getElementById('demoModal');
            const closeBtn = modal.querySelector('.close');
            let calendlyWidget = null;

            console.log('Video element:', video); // Debug log

            // Set video volume to 50%
            if (video) {
                video.volume = 0.5;

                // Add event listeners for fullscreenchange and webkitfullscreenchange
                document.addEventListener('fullscreenchange', handleFullscreenChange);
                document.addEventListener('webkitfullscreenchange', handleFullscreenChange);

                // Add ended event listener
                video.addEventListener('ended', handleVideoEnded);
            } else {
                console.error('Video element not found'); // Error log
            }

            function handleFullscreenChange() {
                if (!document.fullscreenElement && !document.webkitFullscreenElement) {
                    // Fullscreen has been exited
                    if (video.ended) {
                        openModal();
                    }
                }
            }

            function handleVideoEnded() {
                console.log('Video ended'); // Debug log
                if (document.fullscreenElement || document.webkitFullscreenElement) {
                    // Exit fullscreen
                    if (document.exitFullscreen) {
                        document.exitFullscreen();
                    } else if (document.webkitExitFullscreen) {
                        document.webkitExitFullscreen();
                    }
                } else {
                    openModal();
                }
            }

            if (openModalBtn) {
                openModalBtn.onclick = openModal;
            }

            // Close modal
            closeBtn.onclick = function() {
                modal.style.display = "none";
            }

            // Close modal if clicked outside
            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }

            function openModal() {
                console.log('Opening modal'); // Debug log
                modal.style.display = "block";
                if (!calendlyWidget) {
                    loadCalendly();
                }
            }

            function loadCalendly() {
                calendlyWidget = Calendly.initInlineWidget({
                    url: 'https://calendly.com/dakota-main-teamboxd/30min',
                    parentElement: document.getElementById('calendly-embed'),
                    prefill: {},
                    utm: {},
                    styles: {
                        height: '100%'
                    }
                });
            }

            const highlightedElements = document.querySelectorAll('.highlight-gradient');
            const header = document.querySelector('.header');
            let lastScrollTop = 0;

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('in-view');
                    } else {
                        entry.target.classList.remove('in-view');
                    }
                });
            }, {
                threshold: 0.5
            });

            highlightedElements.forEach(el => {
                observer.observe(el);
            });

            function handleScroll() {
                if (window.innerWidth > 768) { // Only apply scroll-based background on desktop
                    let scrollTop = window.pageYOffset || document.documentElement.scrollTop;

                    if (scrollTop > 0) {
                        header.classList.add('header-scrolled');
                    } else {
                        header.classList.remove('header-scrolled');
                    }
                }
            }

            window.addEventListener('scroll', handleScroll, false);
            window.addEventListener('resize', handleScroll, false); // Re-check on resize

            // Initial check
            handleScroll();

            const demoForm = document.getElementById('demoForm');
            
            if (demoForm) {
                demoForm.addEventListener('submit', function(e) {
                    e.preventDefault();

                    const formData = new FormData(demoForm);

                    // Get the user's IP address
                    fetch('https://api.ipify.org?format=json')
                        .then(response => response.json())
                        .then(data => {
                            formData.append('ip', data.ip);

                            // Replace this URL with your Google Apps Script web app URL
                            const scriptUrl = 'https://script.google.com/macros/s/AKfycbxcK19rUjq1HZsN2QwHtufIbGwOn28o8XVlGAltCZeQx1ZmvRKHdUFBHUb5cbS0XAb6AA/exec';

                            fetch(scriptUrl, {
                                method: 'POST',
                                mode: 'no-cors',
                                body: formData
                            })
                            .then(response => {
                                console.log('Demo request submitted successfully');
                                alert('Thank you for your interest! We will contact you soon to schedule a demo.');
                                demoForm.reset();
                            })
                            .catch(error => {
                                console.error('Error:', error);
                                alert('An error occurred. Please try again.');
                            });
                        })
                        .catch(error => {
                            console.error('Error getting IP:', error);
                            alert('An error occurred. Please try again.');
                        });
                });
            }

            function showCalendlyModal() {
                document.getElementById('calendlyModal').style.display = 'block';
                document.body.style.overflow = 'hidden';
                hideHeaderOnMobile();
            }

            function closeCalendlyModal() {
                document.getElementById('calendlyModal').style.display = 'none';
                document.body.style.overflow = 'auto';
                showHeaderOnMobile();
            }

            function hideHeaderOnMobile() {
                if (window.innerWidth <= 768) { // Adjust this value based on your mobile breakpoint
                    document.querySelector('header').style.display = 'none';
                }
            }

            function showHeaderOnMobile() {
                if (window.innerWidth <= 768) { // Adjust this value based on your mobile breakpoint
                    document.querySelector('header').style.display = 'block';
                }
            }

            // Add event listener for window resize
            window.addEventListener('resize', function() {
                if (document.getElementById('calendlyModal').style.display === 'block') {
                    hideHeaderOnMobile();
                } else {
                    showHeaderOnMobile();
                }
            });
        });
    </script>

    <!-- Add Calendly script -->
    <script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript" async></script>
</body>
</html>